var alternatives=[],subtopics=[],correctAlternativeId="";function doAlternativesArray(){[...ALL_ELEMENTS(".alternativeContainer .alternative__row")].forEach(e=>{let t={id:parseInt(e.getAttribute("id")),alternativeText:e.querySelector("textarea").value,isCorrect:e.getAttribute("iscorrect")};alternatives.push(t)})}function openSubtopics(e){null===e.getAttribute("active")?(e.style.height="370px",e.setAttribute("active",!0),e.querySelector(".subject__item").style.borderBottomStyle="dashed",e.querySelector(".subject__item").style.borderBottomColor="black"):(e.removeAttribute("active"),e.style.height="100px",e.querySelector(".subject__item").style.borderBottomStyle="solid",e.querySelector(".subject__item").style.borderBottomColor="#ccc")}null!==ONE_ELEMENT("#idDefaultQuestion")&&doAlternativesArray(),[...ALL_ELEMENTS(".btnSeeMore")].forEach(e=>{e.addEventListener("click",e=>{openSubtopics(e.target.closest(".subject"))})});var alternativeRow=ONE_ELEMENT(".alternative__row");function eventsAlternatives(){[...ALL_ELEMENTS(".alternativeContainer .alternative__row")].forEach(e=>{let t=parseInt(e.getAttribute("id"));eventAlternativeText(t,e),eventAlternativeBtnIsCorrect(t,e),eventAlternativeBtnIsNotCorrect(t,e),eventAlternativeBtnDelete(t,e),changeLayoutBtn(t,e),eventAlternativeTextFocus(e)})}function eventAlternativeText(e,t){t.querySelector(".alternativeRow__input").addEventListener("keyup",t=>{let r=t.currentTarget.value,n=alternatives.findIndex(t=>{if(t.id===e)return!0});alternatives[n].alternativeText=r})}function eventAlternativeTextFocus(e){e.querySelector(".alternativeRow__input").addEventListener("focus",t=>{e.classList.remove("alternative__row--error"),e.querySelector(".alternative__row--alert").classList.add("d-none")})}function eventAlternativeBtnIsCorrect(e,t){t.querySelectorAll(".alternativeRow__btn")[0].addEventListener("click",r=>{if(null===r.currentTarget.getAttribute("disabled")){let r=alternatives.findIndex(t=>{if(t.id===e)return!0});alternatives[r].isCorrect=!0,changeLayoutBtn(e,t),""===correctAlternativeId&&(correctAlternativeId=alternatives[r].id,disabledCorrectBtn())}})}function disabledCorrectBtn(){[...ALL_ELEMENTS(".alternativeContainer .alternative__row")].forEach(e=>{e.getAttribute("id")!=correctAlternativeId&&e.querySelectorAll(".alternativeRow__btn")[0].setAttribute("disabled",!0)})}function eventAlternativeBtnIsNotCorrect(e,t){t.querySelectorAll(".alternativeRow__btn")[1].addEventListener("click",r=>{let n=alternatives.findIndex(t=>{if(t.id===e)return!0});parseInt(t.getAttribute("id"))===correctAlternativeId&&(correctAlternativeId="",removeDisabledCorrectBtn()),alternatives[n].isCorrect=!1,changeLayoutBtn(e,t)})}function removeDisabledCorrectBtn(){[...ALL_ELEMENTS(".alternativeContainer .alternative__row")].forEach(e=>{e.getAttribute("id")!=correctAlternativeId&&e.querySelectorAll(".alternativeRow__btn")[0].removeAttribute("disabled",!0)})}function eventAlternativeBtnDelete(e,t){t.querySelectorAll(".alternativeRow__btn")[2].addEventListener("click",r=>{let n=alternatives.findIndex(t=>{if(t.id===e)return!0});alternatives.splice(n,1),t.remove()}),removeDisabledCorrectBtn()}function changeLayoutBtn(e,t){let r=t.querySelectorAll(".alternativeRow__btn")[0],n=t.querySelectorAll(".alternativeRow__btn")[1],i=alternatives.findIndex(t=>{if(t.id===e)return!0});alternatives[i].isCorrect?(r.classList.add("isCorrect"),n.classList.remove("isWrong")):(r.classList.remove("isCorrect"),n.classList.add("isWrong"))}function allValidation(){let e=!0;return[...ALL_ELEMENTS(".alert")].forEach(e=>{e.classList.add("d-none")}),(!1===verifyQuestionText()||!1===verifySubjectCheck()||!1===verifyAlternativeRow()||!1===verifyAlternativeRowEmpty()||!1===verifyOnlyOneCorrectAlternative())&&(e=!1),e}function verifyQuestionText(){return""!==ONE_ELEMENT(".questionInput").value||(ONE_ELEMENT("#alertQuestion").classList.remove("d-none"),window.scrollTo(0,0),!1)}function verifySubjectCheck(){let e=!1;if([...ALL_ELEMENTS(".subtopicCheck")].forEach(t=>{t.checked&&(e=!0)}),!1===e){let e=ONE_ELEMENT("#cardSubject").offsetTop;window.scrollTo(0,e),ONE_ELEMENT("#alertSubject").classList.remove("d-none")}return e}function verifyAlternativeRowEmpty(){if(alternatives.length<2){ONE_ELEMENT("#alertAlternatives").classList.remove("d-none");let e=ONE_ELEMENT("#cardAlternative").offsetTop;return window.scrollTo(0,e),!1}return!0}function verifyOnlyOneCorrectAlternative(){let e=!1;if(alternatives.forEach(t=>{t.isCorrect&&(e=!0)}),!1===e){ONE_ELEMENT("#alertAlternativesIsCorrect").classList.remove("d-none");let e=ONE_ELEMENT("#cardAlternative").offsetTop;window.scrollTo(0,e)}return e}function verifyAlternativeRow(){let e=!0;return[...ALL_ELEMENTS(".alternativeContainer .alternative__row")].forEach(t=>{if(""===t.querySelector(".alternativeRow__input").value){t.classList.add("alternative__row--error"),t.querySelector(".alternative__row--alert").classList.remove("d-none"),e=!1;let r=ONE_ELEMENT("#cardAlternative").offsetTop;window.scrollTo(0,r)}else t.classList.remove("alternative__row--alert"),t.querySelector(".alternative__row--alert").classList.add("d-none")}),e}ONE_ELEMENT("#btnAddAlternative").addEventListener("click",e=>{let t={id:alternatives.length+1,alternativeText:"",isCorrect:!1};alternatives.push(t),alternatives.forEach(e=>{e.isCorrect=!1});let r=alternativeRow.cloneNode(!0);r.style.display="flex",r.setAttribute("id",t.id),ONE_ELEMENT(".alternativeContainer").append(r),eventsAlternatives(),removeDisabledCorrectBtn(),correctAlternativeId=""}),[...ALL_ELEMENTS(".subtopicCheck")].forEach(e=>{e.addEventListener("change",e=>{let t=e.currentTarget.getAttribute("id");if(e.currentTarget.checked)subtopics.push(t);else{let e=subtopics.findIndex(e=>{if(e===t)return!0});subtopics.splice(e,1)}})}),ONE_ELEMENT("#contactFile").addEventListener("change",e=>{let t=e.target.files;ONE_ELEMENT("#imageFile").files=t}),ONE_ELEMENT("#btnAddQuestion").addEventListener("click",e=>{if(e.preventDefault(),allValidation()){let e=JSON.stringify(alternatives),t=JSON.stringify(subtopics),r=ONE_ELEMENT(".questionInput").value;ONE_ELEMENT("input[name=question]").value=r,ONE_ELEMENT("input[name=alternatives]").value=e,ONE_ELEMENT("input[name=subject_subtopics]").value=t,ONE_ELEMENT("#questionForm").submit()}else ONE_ELEMENT("#goToAddBtn").classList.remove("d-none")}),ONE_ELEMENT("#goToAddBtn").addEventListener("click",e=>{e.currentTarget.classList.add("d-none");let t=ONE_ELEMENT("#btnAddQuestion").offsetTop;window.scrollTo(0,t)}),ONE_ELEMENT("#videoLink").addEventListener("change",e=>{let t=e.currentTarget.value;ONE_ELEMENT("input[name=videoLink]").value=t}),ONE_ELEMENT("#videoLink").addEventListener("keyup",e=>{let t=e.currentTarget.value;ONE_ELEMENT("input[name=videoLink]").value=t});